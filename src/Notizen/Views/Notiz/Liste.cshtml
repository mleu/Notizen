@using Notizen.Model
@model IEnumerable<Notizen.Model.NotizModelListe>

@{
    ViewData["Title"] = "Liste";
}

<ul class="list-unstyled liste-menu">
    <li><a asp-action="Neu" class="btn btn-default">Neue Notiz</a></li>
    <li><a asp-action="WechsleStyle" class="btn btn-default">wechsle Style</a></li>
</ul>
<ul class="list-unstyled liste-filter">
    <li>
        <ul class="list-unstyled liste-filter-links">
            <li><a asp-action="WechsleSortierung" asp-route-id="@SortierungsTyp.ErledigtBisDatum" class="btn btn-default @(ViewBag.Sortierung == SortierungsTyp.ErledigtBisDatum.ToString() ? "active" : "")">Erledigt Bis</a></li>
            <li><a asp-action="WechsleSortierung" asp-route-id="@SortierungsTyp.Wichtigkeit" class="btn btn-default @(ViewBag.Sortierung == SortierungsTyp.Wichtigkeit.ToString() ? "active" : "")">Wichtigkeit</a></li>
            <li><a asp-action="WechsleSortierung" asp-route-id="@SortierungsTyp.Erstelldatum" class="btn btn-default @(ViewBag.Sortierung == SortierungsTyp.Erstelldatum.ToString() ? "active" : "")">Erstelldatum</a></li>
        </ul>
    </li>
    <li><a asp-action="WechsleFilter" class="btn btn-default @(ViewBag.FilterAbgeschlossen == true.ToString() ? "active" : "")">Erledigte ausblenden</a></li>

</ul>
@if(Model.Any()) {
    <ol class="notiz list-unstyled">
        @foreach (var item in Model)
        {
        <li>
            <div class="notiz-inhalt">
                <div class="notiz-head">
                    <div class="notiz-head-rechts">
                        <div class="notiz-titel">@item.Titel</div>
                        <span class="rating">
                            @for(int i = 0; i < item.Wichtigkeit; i++) {
                                <div class="rating-static rating-on"></div>
                            }
                        </span>
                    </div>
                    <div class="notiz-head-links">Bis <span class="relativedate" title="@item.ErledigtBis">@item.ErledigtBis</span></div>
                </div>
                <div class="notiz-body">
                    <div class="notiz-body-links">
                        <label>
                            <input type="checkbox" value="" disabled @(item.AbgeschlossenZeitpunkt.HasValue ? "checked": "")>
                            <span>Erledigt
                            @if (item.AbgeschlossenZeitpunkt.HasValue)
                            {
                                <span class="notiz-abgeschlossenzeitpunkt">[<span class="relativedate" title="@item.AbgeschlossenZeitpunkt">@item.AbgeschlossenZeitpunkt</span>]</span>
                            }
                            </span>
                        </label>
                    </div>
                    <div class="notiz-body-rechts"><textarea class="form-control" rows="3" disabled>@item.Beschreibung</textarea></div>
                </div>
            </div>
            <div class="notiz-buttons">
                <a asp-action="Editieren" asp-route-id="@item.Id" class="btn btn-default">Editieren</a>
                <a asp-action="Loeschen" asp-route-id="@item.Id" class="btn btn-danger">LÃ¶schen</a>
            </div>
        </li>
        }
    </ol>
}
else
{
    <div class="alert alert-success" role="alert">Keine Notizen. Alles erledigt!</div>
}
